
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Catalog &mdash; Blaze 0.5 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/bootstrap-2.2.1.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/bootstrap-responsive-2.2.1.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/bootstrap-2.2.1.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="_static/js/bootstrap-scrollspy.js"></script>
    <script type="text/javascript" src="_static/js/bootstrap-affix.js"></script>
    <link rel="top" title="Blaze 0.5 documentation" href="index.html" />
    <link rel="next" title="Access Data from Different Sources" href="data_sources.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

<div class="container">
  <!-- This is copied from /web, find better solution -->
  <div class="masthead">
    <ul class="nav nav-pills pull-right">
        <li>
            <a href="/index.html"><i class="icon-home"></i> Blaze</a>
        </li>
        
        <li class="active">
            <a href="/docs/index.html"><i class="icon-book"></i> Documentation</a>
        </li>
        
        <li>
            <a href="/docs/quickstart.html"><i class="icon-ok"></i> Examples</a>
        </li>
        
        <li>
            <a href="http://github.com/ContinuumIO/blaze"><i class="icon-download"></i> Source</a>
        </li>
        
        <li>
            <a href="/vision.html"><i class="icon-star"></i> Vision</a>
        </li>
        
        <li>
            <a href="/people.html"><i class="icon-user"></i> People</a>
        </li>
        
        <li>
            <a href="http://groups.google.com/a/continuum.io/forum/#!forum/blaze-dev"><i class="icon-envelope"></i> Mailing List</a>
        </li>
    </ul>
    <h3 class="muted"><img src="_static/img/logo.png">Blaze</h3>
  </div>

  <hr>

  <div class="row">
      <div class="span3">
         <ul id="nav" class="nav nav-list" data-spy="affix" data-offset-top="200"><li><a href="index.html"><b>Index</b></a></li>
<ul>
<li><a class="reference internal" href="#">Catalog</a><ul>
<li><a class="reference internal" href="#guided-tour">Guided Tour</a><ul>
<li><a class="reference internal" href="#loading-blaze-in-ipython">Loading Blaze in IPython</a></li>
<li><a class="reference internal" href="#navigating-the-catalog">Navigating the Catalog</a></li>
<li><a class="reference internal" href="#loading-array-data">Loading Array Data</a></li>
<li><a class="reference internal" href="#the-array-data-structure">The Array Data Structure</a></li>
</ul>
</li>
</ul>
</li>
</ul>

         </ul>
      </div>
      <div class="span9">
          
  <div class="section" id="catalog">
<h1>Catalog<a class="headerlink" href="#catalog" title="Permalink to this headline">¶</a></h1>
<p>The Blaze catalog is a way to organize and work with your data. In
the current version, it is implemented for a local catalog on one machine,
and in future revisions it will be extended to be consistent across
Blaze clusters.</p>
<div class="section" id="guided-tour">
<h2>Guided Tour<a class="headerlink" href="#guided-tour" title="Permalink to this headline">¶</a></h2>
<p>By default, when you start Blaze for the first time, an empty catalog
is created for you as a place to put your data. The default catalog
is configured at <tt class="docutils literal"><span class="pre">~/.blaze/catalog.config</span></tt>, and it is set to point
to <tt class="docutils literal"><span class="pre">~/Arrays</span></tt> as the source of array data. This is not created
automatically by Blaze, but is easy to initialize by running.:</p>
<div class="highlight-python"><pre>In [1]: blaze.catalog.init_default()</pre>
</div>
<div class="section" id="loading-blaze-in-ipython">
<h3>Loading Blaze in IPython<a class="headerlink" href="#loading-blaze-in-ipython" title="Permalink to this headline">¶</a></h3>
<p>The Blaze source repository includes a small set of sample arrays
in a catalog, we will load and work with these arrays to illustrate
the features. To start, load an IPython prompt, and import Blaze.:</p>
<div class="highlight-python"><pre>In [1]: import blaze</pre>
</div>
<p>The first thing to do, since we want to demonstrate our sample catalog,
is to load that catalog&#8217;s configuration.:</p>
<div class="highlight-python"><pre>In [2]: blaze.catalog.load_config(
            r&quot;~/blaze/samples/server/sample_arrays.yaml&quot;)</pre>
</div>
<p>To see information about the catalog that is currently loaded,
simply print out the repr of the catalog configuration object.:</p>
<div class="highlight-python"><pre>In [3]: blaze.catalog.config
Out[3]:
Blaze Catalog Configuration
/path/to/sample_arrays.yaml

root: /path/to/Arrays</pre>
</div>
</div>
<div class="section" id="navigating-the-catalog">
<h3>Navigating the Catalog<a class="headerlink" href="#navigating-the-catalog" title="Permalink to this headline">¶</a></h3>
<p>On import, because we are in an IPython environment, Blaze has
configured some line magics to work with the catalog. These are
similar to the usual unix <tt class="docutils literal"><span class="pre">ls</span></tt>, <tt class="docutils literal"><span class="pre">cd</span></tt>, and <tt class="docutils literal"><span class="pre">pwd</span></tt>, but prefixed
with <tt class="docutils literal"><span class="pre">b</span></tt> for Blaze. Let&#8217;s start by taking a look what our working
directory is in the Blaze catalog, and what arrays and directories
are available. Note that you may have to say <tt class="docutils literal"><span class="pre">%bpwd</span></tt> instead of
<tt class="docutils literal"><span class="pre">bpwd</span></tt> in some circumstances, but we will avoid the percent and
rely on IPython&#8217;s magic.:</p>
<div class="highlight-python"><pre>In [5]: bpwd
Out[5]: &#x27;/&#x27;

In [6]: bls
btc dates_vals kiva kiva_tiny</pre>
</div>
<p>In the latter example, the directories should appear in a different
color than the arrays. You may see that <tt class="docutils literal"><span class="pre">btc</span></tt>, <tt class="docutils literal"><span class="pre">kiva</span></tt>, and
<tt class="docutils literal"><span class="pre">kiva_tiny</span></tt> are directories, while <tt class="docutils literal"><span class="pre">dates_vals</span></tt> is an array.
Let&#8217;s switch to the <tt class="docutils literal"><span class="pre">kiva_tiny</span></tt> directory.:</p>
<div class="highlight-python"><pre>In [8]: bcd kiva_tiny
/kiva_tiny

In [9]: bpwd
Out[9]: u&#x27;/kiva_tiny&#x27;

In [10]: bls
lenders loans</pre>
</div>
</div>
<div class="section" id="loading-array-data">
<h3>Loading Array Data<a class="headerlink" href="#loading-array-data" title="Permalink to this headline">¶</a></h3>
<p>There are two arrays available here. Let&#8217;s load the <tt class="docutils literal"><span class="pre">lenders</span></tt> and
take a look at its data. This is done with the <tt class="docutils literal"><span class="pre">%barr</span></tt> magic,
which can be used on the right side of an assignment statement.:</p>
<div class="highlight-python"><pre>In [11]: x = %barr lenders

In [12]: x.dshape
Out[12]: dshape(&quot;52, { lender_id : json; name : json; image : { id : int64; template_id : int64 }; whereabouts : string; country_code : json; uid : string; member_since : string; personal_url : string; occupation : string; loan_because : string; occupational_info : string; loan_count : int64; invitee_count : int64; inviter_id : json }&quot;)

In [15]: x.occupation
Out[15]:
array(
[u&#x27;International Development Manager&#x27;, u&#x27;retired dentist&#x27;, u&#x27;&#x27;, u&#x27;&#x27;, u&#x27;&#x27;,
 u&#x27;internet campaigner&#x27;, u&#x27;Engineer&#x27;, u&#x27;Nursery Manager&#x27;, u&#x27;Web designer&#x27;,
 u&#x27;Technical Assistant&#x27;, u&#x27;&#x27;, u&#x27;&#x27;, u&#x27;&#x27;, u&#x27;&#x27;, u&#x27;Licenses Optician&#x27;,
 u&#x27;physician&#x27;, u&#x27;&#x27;, u&#x27;Lic. Optician&#x27;, u&#x27;&#x27;, u&#x27;&#x27;, u&#x27;&#x27;, u&#x27;Master&#x27;,
 u&#x27;Politician&#x27;, u&#x27;guardian&#x27;, u&#x27;&#x27;, u&#x27;&#x27;, u&#x27;Carpenter&#x27;, u&#x27;&#x27;, u&#x27;IT&#x27;,
 u&#x27;Art Director&#x27;, u&#x27;Nomad&#x27;, u&#x27;Student&#x27;, u&#x27;Teacher&#x27;,
 u&#x27;IT Network consultant&#x27;, u&#x27;Pastry Chef&#x27;, u&#x27;Student&#x27;, u&#x27;&#x27;,
 u&#x27;Writer and Editor&#x27;, u&#x27;Union Construction&#x27;, u&#x27;veterinarian&#x27;,
 u&#x27;Architect&#x27;, u&#x27;Technical Trainer&#x27;, u&#x27;pharmacist / farmaceutico&#x27;,
 u&#x27;Marketing Manager&#x27;, u&#x27;teacher&#x27;, u&#x27;&#x27;, u&#x27;&#x27;, u&#x27;&#x27;, u&#x27;&#x27;, u&#x27;retired&#x27;,
 u&#x27;Sales Director&#x27;, u&#x27;&#x27;],
      dshape=&#x27;52, string&#x27;)</pre>
</div>
</div>
<div class="section" id="the-array-data-structure">
<h3>The Array Data Structure<a class="headerlink" href="#the-array-data-structure" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s now take a look at what the files on disk look like, backing
the array we loaded. The <tt class="docutils literal"><span class="pre">lenders</span></tt> array is described by a file <tt class="docutils literal"><span class="pre">lenders.array</span></tt>,
as follows.:</p>
<div class="highlight-python"><pre>In [17]: print open(r&quot;~/blaze/samples/server/arrays/kiva_tiny/lenders.array&quot;).read()
type: json
import: {}
datashape: |
    var, {
        lender_id: json; # Option(string);
        name: json; # Option(string);
        image: {
            id: int64;
            template_id: int64;
        };
        whereabouts: string;
        country_code: json; # string(2);
        uid: string;
        member_since: string; # datetime&lt;minutes&gt;
        personal_url: string; # URL type?
        occupation: string;
        loan_because: string;
        occupational_info: string;
        loan_count: int64;
        invitee_count: int64;
        inviter_id: json; # sometimes string, sometimes number 0. 0 is being used as the &quot;missing value&quot;
    }</pre>
</div>
<p>This file is a YAML configuration file, which describes some data import
settings including the datashape of the data. In this case, the data is
in JSON format (<tt class="docutils literal"><span class="pre">lenders.json</span></tt> right beside the <tt class="docutils literal"><span class="pre">.array</span></tt> file), and
its datashape is provided using YAML&#8217;s multi-line string literal syntax.</p>
<p>If we go back up one level to the root of the catalog, we can see another
array <tt class="docutils literal"><span class="pre">dates_vals</span></tt>, which is in CSV format. Here is how it looks.:</p>
<div class="highlight-python"><pre>In [18]: bcd ..
/

In [19]: x = %barr dates_vals

In [19]: x[:10]
Out[19]:
array(
[{u&#x27;values&#x27;: 0, u&#x27;data&#x27;: datetime.date(2013, 1, 1)},
 {u&#x27;values&#x27;: 1, u&#x27;data&#x27;: datetime.date(2013, 1, 2)},
 {u&#x27;values&#x27;: 2, u&#x27;data&#x27;: datetime.date(2013, 1, 3)},
 {u&#x27;values&#x27;: 3, u&#x27;data&#x27;: datetime.date(2013, 1, 4)},
 {u&#x27;values&#x27;: 4, u&#x27;data&#x27;: datetime.date(2013, 1, 5)},
 {u&#x27;values&#x27;: 5, u&#x27;data&#x27;: datetime.date(2013, 1, 6)},
 {u&#x27;values&#x27;: 6, u&#x27;data&#x27;: datetime.date(2013, 1, 7)},
 {u&#x27;values&#x27;: 7, u&#x27;data&#x27;: datetime.date(2013, 1, 8)},
 {u&#x27;values&#x27;: 8, u&#x27;data&#x27;: datetime.date(2013, 1, 9)},
 {u&#x27;values&#x27;: 9, u&#x27;data&#x27;: datetime.date(2013, 1, 10)}],
      dshape=&#x27;10, { data : date; values : int32 }&#x27;)</pre>
</div>
</div>
</div>
</div>


      </div>
  </div>
</div>
  </body>
</html>