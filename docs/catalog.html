
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Catalog &mdash; Blaze 0.4.1 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/bootstrap-2.2.1.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/bootstrap-responsive-2.2.1.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/bootstrap-2.2.1.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="_static/js/bootstrap-scrollspy.js"></script>
    <script type="text/javascript" src="_static/js/bootstrap-affix.js"></script>
    <link rel="top" title="Blaze 0.4.1 documentation" href="index.html" />
    <link rel="next" title="Access Data from Different Sources" href="data_sources.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

<div class="container">
  <!-- This is copied from /web, find better solution -->
  <div class="masthead">
    <ul class="nav nav-pills pull-right">
        <li>
            <a href="/index.html"><i class="icon-home"></i> Blaze</a>
        </li>
        
        <li class="active">
            <a href="/docs/index.html"><i class="icon-book"></i> Documentation</a>
        </li>
        
        <li>
            <a href="/examples.html"><i class="icon-ok"></i> Examples</a>
        </li>
        
        <li>
            <a href="http://github.com/ContinuumIO/blaze-core"><i class="icon-download"></i> Source</a>
        </li>
        
        <li>
            <a href="/vision.html"><i class="icon-star"></i> Vision</a>
        </li>
        
        <li>
            <a href="/people.html"><i class="icon-user"></i> People</a>
        </li>
        
        <li>
            <a href="http://groups.google.com/a/continuum.io/forum/#!forum/blaze-dev"><i class="icon-envelope"></i> Mailing List</a>
        </li>
    </ul>
    <h3 class="muted"><img src="_static/img/logo.png">Blaze</h3>
  </div>

  <hr>

  <div class="row">
      <div class="span3">
         <ul id="nav" class="nav nav-list" data-spy="affix" data-offset-top="200"><li><a href="index.html"><b>Index</b></a></li>
<ul>
<li><a class="reference internal" href="#">Catalog</a><ul>
<li><a class="reference internal" href="#guided-tour">Guided Tour</a><ul>
<li><a class="reference internal" href="#loading-blaze-in-ipython">Loading Blaze in IPython</a></li>
<li><a class="reference internal" href="#navigating-the-catalog">Navigating the Catalog</a></li>
<li><a class="reference internal" href="#loading-array-data">Loading Array Data</a></li>
<li><a class="reference internal" href="#the-array-data-structure">The Array Data Structure</a></li>
</ul>
</li>
</ul>
</li>
</ul>

         </ul>
      </div>
      <div class="span9">
          
  <div class="section" id="catalog">
<h1>Catalog<a class="headerlink" href="#catalog" title="Permalink to this headline">¶</a></h1>
<p>The Blaze catalog is a way to organize and work with your data. In
the current version, it is implemented for a local catalog on one machine,
and in future revisions it will be extended to be consistent across
Blaze clusters.</p>
<div class="section" id="guided-tour">
<h2>Guided Tour<a class="headerlink" href="#guided-tour" title="Permalink to this headline">¶</a></h2>
<p>By default, when you start Blaze for the first time, an empty catalog
is created for you as a place to put your data. The default catalog
is configured at <tt class="docutils literal"><span class="pre">~/.blaze/catalog.config</span></tt>, and it is set to point
to <tt class="docutils literal"><span class="pre">~/Arrays</span></tt> as the source of array data. This is not created
automatically by Blaze, but is easy to initialize by running.:</p>
<div class="highlight-python"><pre>In [1]: blaze.catalog.init_default()</pre>
</div>
<div class="section" id="loading-blaze-in-ipython">
<h3>Loading Blaze in IPython<a class="headerlink" href="#loading-blaze-in-ipython" title="Permalink to this headline">¶</a></h3>
<p>The Blaze source repository includes a small set of sample arrays
in a catalog, we will load and work with these arrays to illustrate
the features. To start, load an IPython prompt, and import Blaze.:</p>
<div class="highlight-python"><pre>In [1]: import blaze</pre>
</div>
<p>The first thing to do, since we want to demonstrate our sample catalog,
is to load that catalog&#8217;s configuration.:</p>
<div class="highlight-python"><pre>In [2]: blaze.catalog.load_config(
   ...:     r"~/blaze/samples/server/sample_arrays.yaml")</pre>
</div>
<p>To see information about the catalog that is currently loaded,
simply print out the repr of the catalog configuration object.:</p>
<div class="highlight-python"><pre>In [3]: blaze.catalog.config
Out[3]:
Blaze Catalog Configuration
/path/to/sample_arrays.yaml

root: /path/to/Arrays</pre>
</div>
</div>
<div class="section" id="navigating-the-catalog">
<h3>Navigating the Catalog<a class="headerlink" href="#navigating-the-catalog" title="Permalink to this headline">¶</a></h3>
<p>On import, because we are in an IPython environment, Blaze has
configured some line magics to work with the catalog. These are
similar to the usual unix <tt class="docutils literal"><span class="pre">ls</span></tt>, <tt class="docutils literal"><span class="pre">cd</span></tt>, and <tt class="docutils literal"><span class="pre">pwd</span></tt>, but prefixed
with <tt class="docutils literal"><span class="pre">b</span></tt> for Blaze. Let&#8217;s start by taking a look what our working
directory is in the Blaze catalog, and what arrays and directories
are available. Note that you may have to say <tt class="docutils literal"><span class="pre">%bpwd</span></tt> instead of
<tt class="docutils literal"><span class="pre">bpwd</span></tt> in some circumstances, but we will avoid the percent and
rely on IPython&#8217;s magic.:</p>
<div class="highlight-python"><pre>In [5]: bpwd
Out[5]: '/'

In [6]: bls
btc dates_vals kiva kiva_tiny</pre>
</div>
<p>In the latter example, the directories should appear in a different
color than the arrays. You may see that <tt class="docutils literal"><span class="pre">btc</span></tt>, <tt class="docutils literal"><span class="pre">kiva</span></tt>, and
<tt class="docutils literal"><span class="pre">kiva_tiny</span></tt> are directories, while <tt class="docutils literal"><span class="pre">dates_vals</span></tt> is an array.
Let&#8217;s switch to the <tt class="docutils literal"><span class="pre">kiva_tiny</span></tt> directory.:</p>
<div class="highlight-python"><pre>In [8]: bcd kiva_tiny
/kiva_tiny

In [9]: bpwd
Out[9]: u'/kiva_tiny'

In [10]: bls
lenders loans</pre>
</div>
</div>
<div class="section" id="loading-array-data">
<h3>Loading Array Data<a class="headerlink" href="#loading-array-data" title="Permalink to this headline">¶</a></h3>
<p>There are two arrays available here. Let&#8217;s load the <tt class="docutils literal"><span class="pre">lenders</span></tt> and
take a look at its data. This is done with the <tt class="docutils literal"><span class="pre">%barr</span></tt> magic,
which can be used on the right side of an assignment statement.:</p>
<div class="highlight-python"><pre>In [11]: x = %barr lenders

In [12]: x.dshape
Out[12]: dshape("52, { lender_id : json; name : json; image : { id : int64; template_id : int64 }; whereabouts : string; country_code : json; uid : string; member_since : string; personal_url : string; occupation : string; loan_because : string; occupational_info : string; loan_count : int64; invitee_count : int64; inviter_id : json }")

In [15]: x.occupation
Out[15]:
array(
[u'International Development Manager', u'retired dentist', u'', u'', u'',
 u'internet campaigner', u'Engineer', u'Nursery Manager', u'Web designer',
 u'Technical Assistant', u'', u'', u'', u'', u'Licenses Optician',
 u'physician', u'', u'Lic. Optician', u'', u'', u'', u'Master',
 u'Politician', u'guardian', u'', u'', u'Carpenter', u'', u'IT',
 u'Art Director', u'Nomad', u'Student', u'Teacher',
 u'IT Network consultant', u'Pastry Chef', u'Student', u'',
 u'Writer and Editor', u'Union Construction', u'veterinarian',
 u'Architect', u'Technical Trainer', u'pharmacist / farmaceutico',
 u'Marketing Manager', u'teacher', u'', u'', u'', u'', u'retired',
 u'Sales Director', u''],
      dshape='52, string')</pre>
</div>
</div>
<div class="section" id="the-array-data-structure">
<h3>The Array Data Structure<a class="headerlink" href="#the-array-data-structure" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s now take a look at what the files on disk look like, backing
the array we loaded. The <tt class="docutils literal"><span class="pre">lenders</span></tt> array is described by a file <tt class="docutils literal"><span class="pre">lenders.array</span></tt>,
as follows.:</p>
<div class="highlight-python"><pre>In [17]: print open(r"~/blaze/samples/server/arrays/kiva_tiny/lenders.array").read()
type: json
import: {}
datashape: |
    var, {
        lender_id: json; # Option(string);
        name: json; # Option(string);
        image: {
            id: int64;
            template_id: int64;
        };
        whereabouts: string;
        country_code: json; # string(2);
        uid: string;
        member_since: string; # datetime&lt;minutes&gt;
        personal_url: string; # URL type?
        occupation: string;
        loan_because: string;
        occupational_info: string;
        loan_count: int64;
        invitee_count: int64;
        inviter_id: json; # sometimes string, sometimes number 0. 0 is being used as the "missing value"
    }</pre>
</div>
<p>This file is a YAML configuration file, which describes some data import
settings including the datashape of the data. In this case, the data is
in JSON format (<tt class="docutils literal"><span class="pre">lenders.json</span></tt> right beside the <tt class="docutils literal"><span class="pre">.array</span></tt> file), and
its datashape is provided using YAML&#8217;s multi-line string literal syntax.</p>
<p>If we go back up one level to the root of the catalog, we can see another
array <tt class="docutils literal"><span class="pre">dates_vals</span></tt>, which is in CSV format. Here is how it looks.:</p>
<div class="highlight-python"><pre>In [18]: bcd ..
/

In [19]: x = %barr dates_vals

In [19]: x[:10]
Out[19]:
array(
[{u'values': 0, u'data': datetime.date(2013, 1, 1)},
 {u'values': 1, u'data': datetime.date(2013, 1, 2)},
 {u'values': 2, u'data': datetime.date(2013, 1, 3)},
 {u'values': 3, u'data': datetime.date(2013, 1, 4)},
 {u'values': 4, u'data': datetime.date(2013, 1, 5)},
 {u'values': 5, u'data': datetime.date(2013, 1, 6)},
 {u'values': 6, u'data': datetime.date(2013, 1, 7)},
 {u'values': 7, u'data': datetime.date(2013, 1, 8)},
 {u'values': 8, u'data': datetime.date(2013, 1, 9)},
 {u'values': 9, u'data': datetime.date(2013, 1, 10)}],
      dshape='10, { data : date; values : int32 }')</pre>
</div>
</div>
</div>
</div>


      </div>
  </div>
</div>
  </body>
</html>